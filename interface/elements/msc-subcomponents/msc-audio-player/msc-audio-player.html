<dom-module id="msc-audio-player">
  <link rel="import" type="css" href="msc-audio-player.css">
  <template>
    <audio id="player" autoplay></audio>
    <div class="audio-control-area">
      <iron-image sizing="contain" id="miniImage" src="{{currentPlay.work.image_url_https}}" on-tap="showTrackDetailView"></iron-image>
      <paper-icon-button id="playButton" icon="[[playState]]" on-tap="togglePlayState" class="action-button"></paper-icon-button>
      <div class="audio-progress-area">
        <div class="audio-info">{{currentPlay.artist_name}}</div>
        <paper-progress id="progress" class="audio-progress"></paper-progress>
        <div class="pay-marker"></div>
        <div class="audio-info audio-info-track"><em>{{currentPlay.song_name}}</em></div>
      </div>
      <paper-icon-button id="nextButton" icon="av:skip-next" on-tap="playNext" class="action-button"></paper-icon-button>
      <paper-menu-button vertical-offset="32" id="playlistMenu" disabled$="{{_computeAddToPlaylistDisabled(currentPlay)}}">
        <paper-icon-button icon="av:playlist-add" class="dropdown-trigger action-button"></paper-icon-button>
        <paper-material class="dropdown-content">
          <template is="dom-repeat" items="{{playlists}}" as="playlist">
            <div class="playlist-option" on-tap="addToPlaylist">{{playlist.name}}</div>
          </template>
          <div class="playlist-option" on-tap="addToNewPlaylist">New...</div>
        </paper-material>
      </paper-menu-button>
      <msc-tip-button recipient="{{currentPlay.contract_id}}" tip-contract></msc-tip-button>
    </div>
  </template>
  <script src="msc-audio-player.js"></script>
</dom-module>
