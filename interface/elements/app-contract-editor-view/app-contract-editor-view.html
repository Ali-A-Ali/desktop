<dom-module id="app-contract-editor-view">
  <link rel="import" type="css" href="app-contract-editor-view.css">
  <template>
    <div>
      <div class="header" on-tap="printData">{{workName}}</div>
      <div>
        <iron-image class="work-image" src="{{workImage}}" sizing="cover"></iron-image>
        <paper-material class="price-area">
          [[locale.editorView.price]]
          <div class="price-line">
            <div class="coin">&#x266E;</div>
            <input id="price" label="[[locale.editorView.labels.price]]" disabled="[[!editable]]" min=0 value="{{coinsPerPlay}}" type="number" class="numeric"></div>
        </paper-material>
      </div>

      <div class="main-section">
        <div class="top-section">
          <paper-material class="audio-input-section" onclick="if(contractEditor.editable)contractEditor.$.audioFile.click()">
            <iron-icon class="music-icon" icon="av:queue-music"></iron-icon>
            <div class="music-file-text">[[selectedAudioText]]</div>
            <div class="music-file-size">[[selectedAudioSize]]</div>
          </paper-material>
          <input hidden id="audioFile" type="file" value="{{selectedAudio}}" onchange="updateSelectedFile()">
          <paper-dropdown-menu disabled="[[!editable]]" label="Contract type">
            <paper-listbox selected="{{contractTypeIdx}}" class="dropdown-content">
              <paper-item>[[locale.editorView.ppp]]</paper-item>
            </paper-listbox>
          </paper-dropdown-menu>
        </div>

        <h3>
          [[locale.editorView.headers.royalties]]
          <paper-input hidden$={{!editable}} class="contributorInput" on-keydown="addRoyaltyOnEnter" label="[[locale.editorView.labels.addRoyalty]]"></paper-input>
        </h3>
        <div class="contributor-area">
          <template is="dom-repeat" items="{{royalties}}" as="royalty">
            <div>
              <paper-material class="royalty-tag contributor-tag">
                <input class="contributor-name" disabled="[[!editable]]" on-keyup="updateUserMapping" value="{{royalty.name::input}}">
                <div>&#x266E;</div>
                <input class="shares" min="0" type="number" disabled="[[!editable]]" value="{{royalty.amount::input}}">
                <div class="contributor-address">{{royalty.address}}</div>
                <paper-icon-button hidden$=[[!editable]] class="deleteButton" icon="icons:clear" on-tap="removeRoyalty"></paper-icon-button>
              </paper-material>
            </div>
          </template>
          <br>
        </div>

        <h3>
          [[locale.editorView.headers.contributors]]
          <paper-input hidden$={{!editable}} class="contributorInput" on-keydown="addContributorOnEnter" label="[[locale.editorView.labels.addContributor]]"></paper-input>
        </h3>
        <div class="contributor-area">
          <template is="dom-repeat" items="{{contributors}}" as="contributor">
            <div>
              <paper-material class="contributor-tag">
                <input class="contributor-name" disabled="[[!editable]]" on-keyup="updateUserMapping" value="{{contributor.name::input}}">
                <input class="shares" min=0 type=number disabled="[[!editable]]" value="{{contributor.shares::input}}">
                <div>[[locale.editorView.shares]]</div>
                <div class="contributor-address">{{contributor.address}}</div>
                <paper-icon-button hidden$=[[!editable]] class="deleteButton" icon="icons:clear" on-tap="removeContributor"></paper-icon-button>
              </paper-material>
            </div>
          </template>
          <br>

        </div>
      </div>
    </div>
  </template>
  <script src="app-contract-editor-view.js"></script>
</dom-module>
